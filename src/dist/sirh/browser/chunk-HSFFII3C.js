import{a as Ue}from"./chunk-BD7P4OWL.js";import{b as Te,d as ze}from"./chunk-5FDWAEWN.js";import{a as Be,b as je}from"./chunk-SHXIUUSG.js";import{a as Ge}from"./chunk-KOPCLON4.js";import{a as De}from"./chunk-ESZ33Y6F.js";import{a as Q,c as J}from"./chunk-EV6A2XWA.js";import{A as x,B as ne,C as ae,E as oe,F as re,G as le,H as me,I as de,K as se,L as pe,N as ce,O as fe,P as ue,Q as ge,Qa as Fe,R as _e,f as W,ha as he,ia as Ee,ja as Ce,ka as xe,la as Me,ma as ve,na as ye,oa as be,p as P,pa as Se,q as K,qa as Pe,r as X,sa as Oe,t as Z,ta as Ie,u as ee,ua as Ae,v as te,xa as we,ya as Ne,z as ie,za as Re}from"./chunk-FNT2LJKG.js";import"./chunk-Z2MHMUCR.js";import"./chunk-CARY4E7O.js";import{$a as m,Eb as t,Fb as e,Gb as l,Jc as G,Kb as S,Kc as q,Nb as E,Pb as f,Qc as $,Sc as H,Ub as B,Vb as j,Wb as T,Xb as L,Yb as n,Za as D,_b as C,a as O,ab as u,b as I,cc as k,dc as Y,f as v,g as A,hc as V,ic as U,jc as z,na as N,sb as c,ub as d,va as y,w,wa as b,xa as R,ya as F}from"./chunk-LOEIOWTE.js";var It=v(Ue()),Le=v(ze());var ke=v(Ge());var qe=["dialogTemplate"];function $e(a,s){a&1&&(t(0,"div",60),l(1,"mat-spinner"),e())}function He(a,s){a&1&&n(0," Informaci\xF3n Personal ")}function Qe(a,s){a&1&&n(0," Motivo de baja ")}function Je(a,s){if(a&1&&(t(0,"small"),l(1,"i",62),n(2),e()),a&2){let i=f().$implicit;m(2),C("",i.message," ")}}function We(a,s){if(a&1&&(t(0,"mat-error"),c(1,Je,3,1,"small",61),e()),a&2){let i,r=s.$implicit,o=f();m(),d("ngIf",((i=o.deregistrationForm.get("discharge_date"))==null?null:i.hasError(r.type))&&(((i=o.deregistrationForm.get("discharge_date"))==null?null:i.dirty)||((i=o.deregistrationForm.get("discharge_date"))==null?null:i.touched)))}}function Ke(a,s){if(a&1&&(t(0,"small"),l(1,"i",62),n(2),e()),a&2){let i=f().$implicit;m(2),C("",i.message," ")}}function Xe(a,s){if(a&1&&(t(0,"mat-error"),c(1,Ke,3,1,"small",61),e()),a&2){let i,r=s.$implicit,o=f();m(),d("ngIf",((i=o.deregistrationForm.get("reason"))==null?null:i.hasError(r.type))&&(((i=o.deregistrationForm.get("reason"))==null?null:i.dirty)||((i=o.deregistrationForm.get("reason"))==null?null:i.touched)))}}function Ze(a,s){a&1&&l(0,"i",63)}function et(a,s){a&1&&l(0,"i",64)}function tt(a,s){if(a&1&&(t(0,"small"),l(1,"i",62),n(2),e()),a&2){let i=f().$implicit;m(2),C("",i.message," ")}}function it(a,s){if(a&1&&(t(0,"mat-error"),c(1,tt,3,1,"small",61),e()),a&2){let i,r=s.$implicit,o=f(2);m(),d("ngIf",((i=o.validationEmployee.get("NAME"))==null?null:i.hasError(r.type))&&(((i=o.validationEmployee.get("NAME"))==null?null:i.dirty)||((i=o.validationEmployee.get("NAME"))==null?null:i.touched)))}}function nt(a,s){if(a&1){let i=S();t(0,"h1",65),n(1," \xBFEst\xE1 seguro de realizar la siguiente baja? "),e(),t(2,"mat-dialog-content")(3,"form",12)(4,"p"),n(5,"Escriba el nombre del empleado"),e(),t(6,"mat-form-field",66)(7,"mat-label"),n(8,"Nombre"),e(),l(9,"input",67),e(),c(10,it,2,1,"mat-error",43),t(11,"div",68)(12,"button",69),E("click",function(){y(i);let o=f();return b(o.informationLoss())}),n(13,"Aceptar"),e()()()()}if(a&2){let i=f();m(3),d("formGroup",i.validationEmployee),m(7),d("ngForOf",i.validationMessages.NAME)}}Le.tz.setDefault("America/Mexico_City");var at={parse:{dateInput:"DD/MM/YYYY"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"MMMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}},Nt=(()=>{class a{constructor(i,r,o,p,g,M){this.fb=i,this.dialog=r,this.router=o,this.breakpointObserver=p,this.route=g,this.personalService=M,this.employeeId=null,this.infoEmployee=[],this.employeeName="",this.dialogRef=null,this.loading=!1,this.informationEmployee=this.fb.group({NOMBRE:[""],CURP:[""],RFC:[""],NUMEMP:[""],NUMPLA:[""],CLAVECAT:[""],DOMICILIO:[""],CP:[""],PROYECTO:[""],REL_LAB:[""],CATEGORIA_DESCRIPCION:[""],UNIDAD_RESPONSABLE:[""]}),this.validationEmployee=this.fb.group({NAME:["",[x.required,this.nameMatchValidator.bind(this)]]}),this.validationMessages={discharge_date:[{type:"required",message:"El campo es requerido"}],reason:[{type:"required",message:"El campo es requerido"}],NAME:[{type:"required",message:"El campo es requerido"},{type:"notMatch",message:"El nombre no coincide con el esperado"}]},this.stepperOrientation=this.breakpointObserver.observe("(min-width: 800px)").pipe(w(({matches:_})=>_?"horizontal":"vertical")),this.setGridCols(),this.deregistrationForm=this.fb.group({discharge_date:["",[x.required]],reason:["",[x.required]]})}ngOnInit(){this.employeeId=this.route.snapshot.paramMap.get("id"),this.employeeId&&this.getProfileInformation(this.employeeId)}getProfileInformation(i){this.loading=!0,this.personalService.getInfoEmployeesInformationBaja(i).subscribe(r=>{r&&(this.loading=!1,this.infoEmployee=r,this.informationEmployee.reset(r[0]))})}nameMatchValidator(i){let r=i.value;return r&&r!==this.infoEmployee[0].NOMBRE?{notMatch:!0}:null}onResize(){this.setGridCols()}setGridCols(){this.cols=window.innerWidth<=600?1:4,this.colsForm=window.innerWidth<=600?1:3}dischargeInformation(){return A(this,null,function*(){if(this.deregistrationForm.invalid){this.deregistrationForm.markAllAsTouched();return}this.dialogRef=this.dialog.open(this.dialogTemplate),this.dialogRef.afterClosed().subscribe(()=>{this.validationEmployee.reset()})})}informationLoss(){if(this.validationEmployee.invalid){this.validationEmployee.markAllAsTouched();return}let i=this.infoEmployee[0]._id,r=this.informationEmployee.value,o=r.NOMBRE,p=this.deregistrationForm.get("discharge_date")?.value.format("YYYY-MM-DD"),g={data:I(O({_id:i},r),{discharge_date:p,reason:this.deregistrationForm.get("reason")?.value})},M=this.informationEmployee.get("CURP")?.value;this.personalService.postInformationOff(g).subscribe(_=>{_&&(console.log(_),this.dialogRef&&this.dialogRef.close(),ke.default.fire({title:"Proceso completado",html:`<p>El personal <strong style="color: #9D2449;">${o}</strong> se ha dado de baja correctamente. El formato de baja se gener\xF3 con \xE9xito, da click para descargar.</p>`,icon:"success",confirmButtonText:"Descargar",confirmButtonColor:"#6C6E6D",allowOutsideClick:!1,allowEscapeKey:!1}).then(Ye=>{if(Ye.isConfirmed){let Ve=window.URL.createObjectURL(_),h=document.createElement("a");h.href=Ve,h.download=`BAJA_${M}.docx`,document.body.appendChild(h),h.click(),document.body.removeChild(h)}}),this.router.navigate(["personal","bajas"]))})}static{this.\u0275fac=function(r){return new(r||a)(u(de),u(we),u(J),u(W),u(Q),u(De))}}static{this.\u0275cmp=N({type:a,selectors:[["app-bajas"]],viewQuery:function(r,o){if(r&1&&B(qe,5),r&2){let p;j(p=T())&&(o.dialogTemplate=p.first)}},hostBindings:function(r,o){r&1&&E("resize",function(g){return o.onResize(g)},!1,D)},standalone:!0,features:[k([Z(),{provide:K,useClass:Te,deps:[P]},{provide:X,useValue:at},{provide:P,useValue:"es-MX"},{provide:he,useValue:{displayDefaultIndicatorType:!1}}]),Y],decls:143,vars:13,consts:[["stepper",""],["picker",""],["dialogTemplate",""],["xmlns","http://www.w3.org/2000/svg",1,"d-none"],["id","exclamation-triangle-fill","viewBox","0 0 16 16"],["d","M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"],["class","d-flex justify-content-center align-items-center spinner",4,"ngIf"],["appearance","outlined"],["role","alert",1,"alert","alert-warning","d-flex","align-items-center"],[1,"fa-solid","fa-triangle-exclamation","me-2"],["labelPosition","bottom","linear","",3,"orientation"],["label","Step 1","state","user",3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["rowHeight","70px","gutterSize","10px",3,"cols"],["colspan","1","rowspan","2"],[1,"profilePhoto"],["src","https://cdn-icons-png.flaticon.com/512/7178/7178489.png","alt",""],["colspan","1","rowspan","1"],[1,"example-full-width"],["matInput","","formControlName","NOMBRE","readonly",""],["matInput","","placeholder","C.U.R.P","formControlName","CURP","readonly",""],["matInput","","placeholder","R.F.C","formControlName","RFC","readonly",""],["matInput","","formControlName","NUMEMP","readonly",""],["matInput","","formControlName","NUMPLA","readonly",""],["matInput","","formControlName","CLAVECAT","readonly",""],["matInput","","formControlName","CATEGORIA_DESCRIPCION","readonly",""],["matInput","","formControlName","DOMICILIO","readonly",""],["matInput","","formControlName","CP","readonly",""],["matInput","","placeholder","Department","value","Secretaria de Finanzas","readonly",""],["matInput","","formControlName","UNIDAD_RESPONSABLE","readonly",""],["matInput","","formControlName","PROYECTO","readonly",""],["matInput","","formControlName","REL_LAB","readonly",""],[1,"d-flex","justify-content-center"],["mat-raised-button","","color","accent","matStepperNext","",1,"buttonNext"],[1,"fa-solid","fa-arrow-right"],["label","Step 1","state","userDown",3,"stepControl"],[1,"container"],[1,"row"],[1,"col-12","col-md-4"],["appearance","outline"],["matInput","","formControlName","discharge_date","required","",3,"matDatepicker"],["matIconSuffix","",3,"for"],[4,"ngFor","ngForOf"],["placeholder","Seleccionar Opci\xF3n","matInput","","formControlName","reason","required",""],["value","R-DEF"],["value","R-OCA"],["value","R-JUB"],["value","R-PEN"],["value","L-IBASE"],["value","L-SS"],["value","L-PRRO"],["value","RR"],["value","DEF"],[2,"display","flex","justify-content","space-between","width","100%"],["mat-raised-button","","color","accent","matStepperPrevious","",1,"buttonFinish"],[1,"fa-solid","fa-arrow-left"],["mat-raised-button","","color","accent","matStepperNext","",1,"buttonFinish",3,"click"],["matStepperIcon","user"],["matStepperIcon","userDown"],[1,"d-flex","justify-content-center","align-items-center","spinner"],[4,"ngIf"],[1,"fa","fa-circle-exclamation"],[1,"fa-solid","fa-user"],[1,"fa-solid","fa-arrow-down"],["mat-dialog-title",""],["color","accent","appearance","fill"],["matInput","","formControlName","NAME"],[1,"row","d-flex","justify-content-center"],["type","submit","color","primary","mat-flat-button","",2,"width","150px","margin-top","25px",3,"click"]],template:function(r,o){if(r&1){let p=S();R(),t(0,"svg",3)(1,"symbol",4),l(2,"path",5),e()(),F(),t(3,"h3"),n(4,"BAJA PERSONAL"),e(),c(5,$e,2,0,"div",6),t(6,"mat-card",7)(7,"mat-card-content")(8,"div",8),l(9,"i",9),t(10,"div"),n(11," Aseg\xFArese que los datos del empleado y los motivos de la baja sean correctos antes de proceder. "),e()(),t(12,"mat-stepper",10,0),V(14,"async"),t(15,"mat-step",11)(16,"form",12),c(17,He,1,0,"ng-template",13),t(18,"mat-grid-list",14)(19,"mat-grid-tile",15)(20,"div",16)(21,"label"),n(22,"Foto de perfil:"),e(),l(23,"img",17)(24,"hr"),e()(),t(25,"mat-grid-tile",18)(26,"mat-form-field",19)(27,"mat-label"),n(28,"Nombre:"),e(),l(29,"input",20),e()(),t(30,"mat-grid-tile",18)(31,"mat-form-field",19)(32,"mat-label"),n(33,"CURP:"),e(),l(34,"input",21),e()(),t(35,"mat-grid-tile",18)(36,"mat-form-field",19)(37,"mat-label"),n(38,"RFC:"),e(),l(39,"input",22),e()(),t(40,"mat-grid-tile",18)(41,"mat-form-field",19)(42,"mat-label"),n(43,"Numero \xDAnico de Empleado:"),e(),l(44,"input",23),e()(),t(45,"mat-grid-tile",18)(46,"mat-form-field",19)(47,"mat-label"),n(48,"Numero \xDAnico de Plaza:"),e(),l(49,"input",24),e()(),t(50,"mat-grid-tile",18)(51,"mat-form-field",19)(52,"mat-label"),n(53,"Clave del Puesto:"),e(),l(54,"input",25),e()(),t(55,"mat-grid-tile",18)(56,"mat-form-field",19)(57,"mat-label"),n(58,"Categor\xEDa:"),e(),l(59,"input",26),e()(),t(60,"mat-grid-tile",18)(61,"mat-form-field",19)(62,"mat-label"),n(63,"Domicilio Particular del Empleado:"),e(),l(64,"input",27),e()(),t(65,"mat-grid-tile",18)(66,"mat-form-field",19)(67,"mat-label"),n(68,"C\xF3digo Postal:"),e(),l(69,"input",28),e()(),t(70,"mat-grid-tile",18)(71,"mat-form-field",19)(72,"mat-label"),n(73,"Dependencia:"),e(),l(74,"input",29),e()(),t(75,"mat-grid-tile",18)(76,"mat-form-field",19)(77,"mat-label"),n(78,"Unidad Responsable:"),e(),l(79,"input",30),e()(),t(80,"mat-grid-tile",18)(81,"mat-form-field",19)(82,"mat-label"),n(83,"Clave del Proyecto:"),e(),l(84,"input",31),e()(),t(85,"mat-grid-tile",18)(86,"mat-form-field",19)(87,"mat-label"),n(88,"Relaci\xF3n laboral:"),e(),l(89,"input",32),e()()(),t(90,"div",33)(91,"button",34),n(92,"Siguiente "),l(93,"i",35),e()()()(),t(94,"mat-step",36)(95,"form",12),c(96,Qe,1,0,"ng-template",13),t(97,"div",37)(98,"div",38)(99,"div",39)(100,"mat-form-field",40)(101,"mat-label"),n(102,"Baja apartir de"),e(),l(103,"input",41)(104,"mat-datepicker-toggle",42)(105,"mat-datepicker",null,1),e(),c(107,We,2,1,"mat-error",43),e(),t(108,"div",39)(109,"mat-form-field",40)(110,"mat-label"),n(111,"Motivo"),e(),t(112,"mat-select",44)(113,"mat-option",45),n(114,"Renuncia - Definitiva"),e(),t(115,"mat-option",46),n(116,"Renuncia - Por ocupar otro cargo"),e(),t(117,"mat-option",47),n(118,"Renuncia - Por jubilaci\xF3n"),e(),t(119,"mat-option",48),n(120,"Renuncia - Por pensi\xF3n"),e(),t(121,"mat-option",49),n(122,"Licencia - Indefinida a base"),e(),t(123,"mat-option",50),n(124,"Licencia - Sin goce de sueldo"),e(),t(125,"mat-option",51),n(126,"Licencia - Prorroga"),e(),t(127,"mat-option",52),n(128,"Rescisi\xF3n o revocaci\xF3n"),e(),t(129,"mat-option",53),n(130,"Defunci\xF3n"),e()()(),c(131,Xe,2,1,"mat-error",43),e()()(),t(132,"div",54)(133,"button",55),l(134,"i",56),n(135," Anterior "),e(),t(136,"button",57),E("click",function(){return y(p),b(o.dischargeInformation())}),n(137," Finalizar "),l(138,"i",35),e()()()(),c(139,Ze,1,0,"ng-template",58)(140,et,1,0,"ng-template",59),e()()(),c(141,nt,14,2,"ng-template",null,2,z)}if(r&2){let p=L(106);m(5),d("ngIf",o.loading),m(7),d("orientation",U(14,11,o.stepperOrientation)),m(3),d("stepControl",o.informationEmployee),m(),d("formGroup",o.informationEmployee),m(2),d("cols",o.cols),m(76),d("stepControl",o.deregistrationForm),m(),d("formGroup",o.deregistrationForm),m(8),d("matDatepicker",p),m(),d("for",p),m(3),d("ngForOf",o.validationMessages.discharge_date),m(24),d("ngForOf",o.validationMessages.reason)}},dependencies:[Fe,te,ue,fe,se,pe,ce,ge,_e,xe,Ee,Me,ve,ye,Ce,oe,ie,ne,ae,me,re,le,Se,be,Pe,ee,Oe,Ie,Ae,Ne,Re,H,G,q,$,je,Be],styles:["mat-card[_ngcontent-%COMP%]{border-radius:10px;margin-top:20px;margin-bottom:20px;box-shadow:5px 5px 10px #77777740}mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{max-width:100%}.full-width[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]{margin-bottom:8px}.container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]{margin-top:25px}mat-grid-list[_ngcontent-%COMP%]{margin-top:25px}  .mat-mdc-form-field-subscript-wrapper, .mat-mdc-form-field-bottom-align[_ngcontent-%COMP%]:before{display:none}mat-label[_ngcontent-%COMP%]{color:#000}.buttonNext[_ngcontent-%COMP%], .buttonFinish[_ngcontent-%COMP%]{margin-top:30px;width:250px;display:flex;align-items:center}.profilePhoto[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;height:100%}.profilePhoto[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;color:#000;margin-bottom:8px}.profilePhoto[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;height:100%}mat-error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}mat-card-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:250px;color:#fff;background-color:#777}@media (max-width: 600px){.buttonFinish[_ngcontent-%COMP%]{width:auto!important}mat-dialog-content[_ngcontent-%COMP%]{width:300px!important}}  .mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:transparent!important}mat-dialog-content[_ngcontent-%COMP%]{width:600px}mat-dialog-content[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;margin-top:4px;margin-bottom:20px}.alert[_ngcontent-%COMP%]{height:auto}.alert[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:auto;fill:currentcolor}.spinner[_ngcontent-%COMP%]{height:calc(100vh - 112px)}"]})}}return a})();export{Nt as BajasComponent,at as MY_DATE_FORMATS};
