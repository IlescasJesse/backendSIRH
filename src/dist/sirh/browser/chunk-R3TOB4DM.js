import{a as ot,b as C,c as rt,d as lt,f as st,g as mt}from"./chunk-SB55JBTI.js";import{a as at}from"./chunk-ESZ33Y6F.js";import{c as A}from"./chunk-EV6A2XWA.js";import{Aa as H,Ba as $,Ca as Y,Da as j,Ea as W,Fa as q,Ga as G,Ha as Z,Ia as J,Ja as K,K as L,Ka as X,La as tt,Ma as et,N as V,Na as nt,O as F,P as k,Q as U,Qa as it,R as Q,T as B,v as N}from"./chunk-FNT2LJKG.js";import"./chunk-Z2MHMUCR.js";import"./chunk-CARY4E7O.js";import{$a as m,Eb as a,Fb as n,Gb as _,Hb as c,Ib as d,Kb as b,Kc as I,Nb as O,Pb as x,Sc as y,Ub as D,Vb as E,Wb as v,Yb as o,_b as u,ab as M,cc as R,dc as T,ec as z,na as w,sb as p,ub as f,va as P,wa as h}from"./chunk-LOEIOWTE.js";var ct=()=>[5,10,25,100];function dt(t,i){t&1&&_(0,"mat-progress-bar",26)}function ut(t,i){t&1&&(a(0,"th",27),o(1,"#"),n())}function ft(t,i){if(t&1&&(a(0,"td",28),o(1),n()),t&2){let e=i.index,r=x();m(),u(" ",r.paginator.pageIndex*r.paginator.pageSize+e+1," ")}}function _t(t,i){t&1&&(a(0,"th",27),o(1," OCUPANTE ANTERIOR "),n())}function Ct(t,i){if(t&1&&(a(0,"td",28),o(1),n()),t&2){let e=i.$implicit;m(),u(" ",e.status_plaza==null||e.status_plaza.previousOcuppants[e.status_plaza.previousOcuppants.length-1]==null?null:e.status_plaza.previousOcuppants[e.status_plaza.previousOcuppants.length-1].NOMBRE," ")}}function gt(t,i){t&1&&(a(0,"th",27),o(1," N\xDAMERO DE PLAZA "),n())}function Pt(t,i){if(t&1&&(a(0,"td",28),o(1),n()),t&2){let e=i.$implicit;m(),u(" ",e.NUMPLA," ")}}function ht(t,i){t&1&&(a(0,"th",27),o(1," \xDALTIMA ADSCRIPCI\xD3N "),n())}function Mt(t,i){if(t&1&&(a(0,"td",28),o(1),n()),t&2){let e=i.$implicit;m(),u(" ",e.ADSCRIPCION," ")}}function bt(t,i){t&1&&(a(0,"th",27),o(1," PROYECTO "),n())}function Ot(t,i){if(t&1&&(a(0,"td",28),o(1),n()),t&2){let e=i.$implicit;m(),u(" ",e.PROYECTO," ")}}function xt(t,i){t&1&&(a(0,"th",27),o(1," OPCIONES "),n())}function Dt(t,i){if(t&1){let e=b();a(0,"td",28)(1,"button",29),O("click",function(){let l=P(e).$implicit,s=x();return h(s.goToGenerateProposal(l))}),o(2),n()()}if(t&2){let e=i.$implicit;m(2),u(" ",e.status===2?"Generar Propuesta":e.status===3?"Aplicar":""," ")}}function Et(t,i){t&1&&_(0,"tr",30)}function vt(t,i){t&1&&_(0,"tr",31)}function St(t,i){t&1&&(a(0,"tr",32)(1,"td",33),o(2,"No se han encontrado resultados de la b\xFAsqueda."),n()())}var jt=(()=>{class t{constructor(e,r){this.router=e,this.servicepersonal=r,this.displayedColumns=["#","OCUPANTEANTERIOR","NUMPLA","DEPARTAMENTO","PROYECTO","OPCIONES"],this.noResults=!1,this.searchTerm="",this.searchResults=new et([]),this.loading=!1}ngOnInit(){this.applyQuery()}ngAfterViewInit(){this.searchResults.paginator=this.paginator,this.searchResults.sort=this.sort}applyQuery(){this.loading=!0,this.servicepersonal.getAvailablePlaces().subscribe(e=>{e&&(this.loading=!1,this.searchResults.data=e,this.paginator&&this.paginator.firstPage())})}applyFilter(e){let r=e.target.value.trim().toLowerCase();this.searchResults.filterPredicate=(l,s)=>{let S=String(l.NUMPLA||"").toLowerCase(),g=String(l.PROYECTO||"").toLowerCase(),pt=String(l.status_plaza?.previousOcuppants[l.status_plaza.previousOcuppants.length-1]?.NOMBRE||"").toLowerCase();return S.includes(s)||g.includes(s)||pt.includes(s)},this.searchResults.filter=r,this.searchResults.paginator&&this.searchResults.paginator.firstPage()}goToGenerateProposal(e){e.status===2?this.router.navigate(["personal","formulario_propuestas",e.NUMPLA]):e.status===3&&this.router.navigate(["personal/formulario_alta",e.NUMPLA])}static{this.\u0275fac=function(r){return new(r||t)(M(A),M(at))}}static{this.\u0275cmp=w({type:t,selectors:[["app-plazas-disponibles"]],viewQuery:function(r,l){if(r&1&&(D(C,5),D(lt,5)),r&2){let s;E(s=v())&&(l.paginator=s.first),E(s=v())&&(l.sort=s.first)}},standalone:!0,features:[R([{provide:ot,useValue:mt()}]),T],decls:44,vars:6,consts:[["input",""],["appearance","outlined"],[1,"container"],[1,"row"],[1,"col-6","p-0"],["appearance","outline","color","accent"],["matInput","",3,"keyup"],["matSuffix",""],[1,"col-6","d-flex","justify-content-end","p-0"],["mat-raised-button","","type","submit",1,"buttonWithIcon"],[1,"fa-solid","fa-plus"],["mode","indeterminate",4,"ngIf"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8","table-bordered",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","OCUPANTEANTERIOR"],["matColumnDef","NUMPLA"],["matColumnDef","DEPARTAMENTO"],["matColumnDef","PROYECTO"],["matColumnDef","OPCIONES"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions"],["mode","indeterminate"],["mat-header-cell",""],["mat-cell",""],["mat-raised-button","",1,"buttonWithIcon",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","7",1,"mat-cell","text-center"]],template:function(r,l){if(r&1){let s=b();a(0,"h3"),o(1,"VACANTES DISPONIBLES"),n(),a(2,"mat-card",1)(3,"mat-card-content")(4,"div",2)(5,"div",3)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),o(9,"Buscar"),n(),a(10,"input",6,0),O("keyup",function(g){return P(s),h(l.applyFilter(g))}),n(),a(12,"mat-icon",7),o(13,"search"),n()()(),a(14,"div",8)(15,"button",9)(16,"mat-icon"),_(17,"i",10),n(),o(18," Nueva plaza "),n()()()(),p(19,dt,1,0,"mat-progress-bar",11),a(20,"div",12)(21,"table",13),c(22,14),p(23,ut,2,0,"th",15)(24,ft,2,1,"td",16),d(),c(25,17),p(26,_t,2,0,"th",15)(27,Ct,2,1,"td",16),d(),c(28,18),p(29,gt,2,0,"th",15)(30,Pt,2,1,"td",16),d(),c(31,19),p(32,ht,2,0,"th",15)(33,Mt,2,1,"td",16),d(),c(34,20),p(35,bt,2,0,"th",15)(36,Ot,2,1,"td",16),d(),c(37,21),p(38,xt,2,0,"th",15)(39,Dt,3,1,"td",16),d(),p(40,Et,1,0,"tr",22)(41,vt,1,0,"tr",23)(42,St,3,0,"tr",24),n(),_(43,"mat-paginator",25),n()()()}r&2&&(m(19),f("ngIf",l.loading),m(2),f("dataSource",l.searchResults),m(19),f("matHeaderRowDef",l.displayedColumns),m(),f("matRowDefColumns",l.displayedColumns),m(2),f("pageSizeOptions",z(5,ct)))},dependencies:[tt,H,Y,G,j,$,Z,W,q,J,K,X,st,rt,C,it,N,k,F,L,V,U,Q,B,nt,y,I],styles:["mat-card[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px;box-shadow:5px 5px 10px #77777740}mat-card-content[_ngcontent-%COMP%]{margin:25px}.table-container[_ngcontent-%COMP%]{margin-top:10px;max-width:100%;overflow-x:auto;border:1px solid #777777}table[_ngcontent-%COMP%]{min-width:100%;border-bottom:1px solid #777777;border-top:#9D2449}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;padding:8px;text-align:left;font-size:14px}th[_ngcontent-%COMP%]{background-color:#9d2449!important;color:#fff}.container[_ngcontent-%COMP%]{margin-bottom:10px;max-width:100%}mat-form-field[_ngcontent-%COMP%]{width:100%;padding:0}mat-form-field[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{color:#000}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#777;color:#fff}.table-content[_ngcontent-%COMP%]{border:0px solid #777777;max-height:400px;overflow:auto;width:100%;margin-top:30px}.mat-elevation-z8[_ngcontent-%COMP%], .mat-mdc-elevation-specific.mat-elevation-z8[_ngcontent-%COMP%]{box-shadow:none}.mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid #777777;border-top:1px solid #777777;cursor:pointer}.mat-mdc-header-cell[_ngcontent-%COMP%]{color:#fff}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{background-color:#f1f1f1}table[_ngcontent-%COMP%]{width:100%;height:100%}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#9d2449;border:1px solid #9D2449}.buttonWithIcon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:flex;align-items:center}.buttonWithIcon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:17px}mat-progress-bar[_ngcontent-%COMP%]{margin-top:10px!important}"]})}}return t})();export{jt as PlazasDisponiblesComponent};
